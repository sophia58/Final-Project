<!DOCTYPE html>
<html>

<head>
    <title>Harris County, TX Rainfall Accumulation</title>
    <meta charset='utf-8'>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

    <!--    Carto style sheet-->
    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.15/themes/css/cartodb.css" />
    <link href='https://api.mapbox.com/mapbox-assembly/v0.8.0/assembly.min.css' rel='stylesheet'>
    <script async defer src='https://api.mapbox.com/mapbox-assembly/v0.8.0/assembly.js'></script>

    <style>
        html,
        body,
        #map {
            height: 100%;
            padding: 0;
            margin: 0;
        }
        
        h1 {
            font-size: 150%;
            text-align: center;
        }
        
        p {
            font-size: 140%;
            text-align: center;
        }
    </style>
</head>

<body>

    <!--    For grids, you need parent class "grid" and child class "col"-->
    <div class='grid'>
        <!--parent class grid-->
        <div class='col col--12 col--3-ml p12 pb6 viewport-third viewport-full-ml'>
            <!--child class col-->
            <div class='h-full scroll-auto'>
                <!--mb6 is bottom-margin of 6-->
                <h1 class='txt-headline mb6'>Harris County, TX Rainfall Accumulation</h1>
                <p>Info about this map goes here </p>
                <h2 class='txt-xl mt18 mb12'>About the Data</h2>
                <p>Rainfall accumulation totals shown here are from a period of 3 days in Harvey County, Texas.</p>
                <footer class='mt12 bg-gray-faint txt-s'>
                    <ul>
                        <p>
                            <li>Explore the raw <a class='link' href='#'>data</a> </li>
                            <li>Rainfall data <a class='link' href='https://nwschat.weather.gov/p.php?pid=201708290105-KHGX-NOUS44-PNSHGX'>source</a></li>

                            <li>Map authored by <a class='link' href='#'>Sophia LeBlanc</a></li>
                        </p>
                    </ul>
                </footer>
            </div>
        </div>


        <!--        Add slider and legend-->
        <div class='col col--12 col--9-ml h180 h-full-ml'>
            <div id="map" class='viewport-twothirds viewport-full-ml'></div>



            <div id="map"></div>

            <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js"></script>

            <!--Create CARTOCSS rules to style map as a script then reference within source object    -->

            <script type="cartocss/html" id="tract-styles">
                #layer { polygon-fill: ramp([income2017], (#ffffb2, #fecc5c, #fd8d3c, #f03b20, #bd0026), quantiles); line-width: 1; line-color: #FFF; line-opacity: 0.5; }
            </script>


            <script type="cartocss/html" id="land-styles">

                #na_land_clipped_1['mapnik::geometry_type'=1] { marker-width: 7; marker-fill: #FFB927; marker-fill-opacity: 0.9; marker-line-color: #FFF; marker-line-width: 1; marker-line-opacity: 1; marker-placement: point; marker-type: ellipse; marker-allow-overlap: true; } #na_land_clipped_1['mapnik::geometry_type'=2] { line-color: #3EBCAE; line-width: 1.5; line-opacity: 1; } #na_land_clipped_1['mapnik::geometry_type'=3] { polygon-fill: #374C70; polygon-opacity: 0.9; polygon-gamma: 0.5; line-color: #FFF; line-width: 1; line-opacity: 0.5; line-comp-op: soft-light; }
            </script>

            <script type="cartocss/html" id="grat-styles">
                #na_grat_clipped{ line-width: 1.5; line-color: #c4cccb; line-opacity: 0.16; }
            </script>

            <script type="cartocss/html" id="rain-styles">
                #layer{ marker-width: 30.5; marker-fill: ramp([numofinches], (#d1eeea, #96d0d1, #68abb8, #45829b, #2a5674), quantiles); marker-fill-opacity: 1; marker-allow-overlap: true; marker-line-width: 1; marker-line-color: #FFF; marker-line-opacity: 1; }
            </script>


            <script>
                ///create an object and assign it to a variable
                var map = L.map('map', {
                    center: [29.842, -95.393], //center map (WGS84)
                    zoom: 10 //zoom level
                });


                // request tiles and add to map
                var CartoDB_Positron = L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
                    subdomains: 'abcd',
                    maxZoom: 19
                }).addTo(map);


                var sourceObject = {
                    user_name: 'sophia58',
                    type: 'carto',
                    sublayers: [{
                            sql: "SELECT * FROM tract_48201_and_incomedata",
                            cartocss: $("#tract-styles").text()
                        },
                        {
                            sql: "SELECT * FROM table_3_day_rain_totals",
                            cartocss: $("#rain-styles").text()
                        },
                    ]
                }

                cartodb.createLayer(map, sourceObject).addTo(map);
            </script>


</body>

</html>
